@using Razor.Orm.Template
@using Razor.Orm.Test.Dto
@inherits SqlTemplate<PeopleFilterDto>
SELECT COUNT(*)
    FROM [Person].[Person]
    @using (var w = SmartWhere())
    {
        if (!string.IsNullOrEmpty(Model.LikeFirstName))
        {
            <text>[FirstName] LIKE @Par($"%{Model.LikeFirstName}%")</text> 
        }
        if (Model.EmailPromotionOptions != null && Model.EmailPromotionOptions.Length > 0)
        {
            w.And();
            <text>[EmailPromotion] @In(Model.EmailPromotionOptions)</text>
        }
    }